<?xml version="1.0" encoding="UTF-8"?>
<api context="/transaction" name="walletAPI" xmlns="http://ws.apache.org/ns/synapse">
  <resource methods="POST" protocol="http" uri-template="/{endUserId}/payment">
    <inSequence>
      <property name="messageType" scope="axis2" type="STRING" value="application/json"/>
      <property expression="json-eval($.makePayment.clientCorrelator)"
        name="clientCorrelator" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('clientCorrelator - ',get-property('clientCorrelator'))" name="text"/>
      </log>
      <property expression="json-eval($.makePayment.endUserId)"
        name="endUserId" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('endUserId - ',get-property('endUserId'))" name="text"/>
      </log>
      <property expression="json-eval($.makePayment.referenceCode)"
        name="referenceCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('referenceCode - ',get-property('referenceCode'))" name="text"/>
      </log>
      <property expression="json-eval($.makePayment.notifyURL)"
        name="notifyURL" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('notifyURL - ',get-property('notifyURL'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingInformation.amount)"
        name="amount" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('amount - ',get-property('amount'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingInformation.currency)"
        name="currency" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('currency - ',get-property('currency'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingInformation.description)"
        name="description" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('description - ',get-property('description'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingMetaData.onBehalfOf)"
        name="onBehalfOf" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('onBehalfOf - ',get-property('onBehalfOf'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingMetaData.purchaseCategoryCode)"
        name="purchaseCategoryCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('purchaseCategoryCode - ',get-property('purchaseCategoryCode'))" name="text"/>
      </log>
      <property
        expression="json-eval($.makePayment.paymentAmount.chargingMetaData.channel)"
        name="channel" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('channel - ',get-property('channel'))" name="text"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="GET" protocol="http" uri-template="/{endUserId}/list">
    <inSequence>
      <property expression="get-property('uri.var.endUserId')"
        name="endUserId" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('endUserId - ',get-property('endUserId'))" name="text"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="POST" protocol="http" uri-template="/{endUserId}/refund">
    <inSequence>
      <property name="messageType" scope="axis2" type="STRING" value="application/json"/>
      <property
        expression="json-eval($.refundTransaction.clientCorrelator)"
        name="clientCorrelator" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('clientCorrelator - ',get-property('clientCorrelator'))" name="text"/>
      </log>
      <property expression="json-eval($.refundTransaction.endUserId)"
        name="endUserId" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('endUserId - ',get-property('endUserId'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.originalReferenceCode)"
        name="originalReferenceCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('originalReferenceCode - ',get-property('originalReferenceCode'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.originalServerReferenceCode)"
        name="originalServerReferenceCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('originalServerReferenceCode - ',get-property('originalServerReferenceCode'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.referenceCode)"
        name="referenceCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('referenceCode - ',get-property('referenceCode'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingInformation.amount)"
        name="amount" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('amount - ',get-property('amount'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingInformation.currency)"
        name="currency" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('currency - ',get-property('currency'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingInformation.description)"
        name="description" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('description - ',get-property('description'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingMetaData.onBehalfOf)"
        name="onBehalfOf" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('onBehalfOf - ',get-property('onBehalfOf'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingMetaData.purchaseCategoryCode)"
        name="purchaseCategoryCode" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('purchaseCategoryCode - ',get-property('purchaseCategoryCode'))" name="text"/>
      </log>
      <property
        expression="json-eval($.refundTransaction.paymentAmount.chargingMetaData.channel)"
        name="channel" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('channel - ',get-property('channel'))" name="text"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="GET" protocol="http" uri-template="/{endUserId}/balance">
    <inSequence>
      <property expression="get-property('uri.var.endUserId')"
        name="endUserId" scope="default" type="STRING"/>
      <log level="custom">
        <property
          expression="fn:concat('endUserId - ',get-property('endUserId'))" name="text"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
</api>
