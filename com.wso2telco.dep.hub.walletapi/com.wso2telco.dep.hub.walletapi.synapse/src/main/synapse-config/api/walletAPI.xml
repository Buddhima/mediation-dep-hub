<?xml version="1.0" encoding="UTF-8"?>
<api context="/transaction" name="walletAPI" xmlns="http://ws.apache.org/ns/synapse">
  <resource methods="POST" protocol="http" uri-template="/{endUserId}/payments">
    <inSequence>
      <property name="messageType" scope="axis2" type="STRING" value="application/json"/>
      <property expression="json-eval($.makePayment.clientCorrelator)"
        name="clientCorrelator" scope="default" type="STRING"/>
      <log>
        <property name="body" value="$body"/>
        <property expression="get-property('clientCorrelator')" name="clientCor"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="GET" protocol="http" uri-template="/{endUserId}/list">
    <inSequence>
      <log>
        <property name="list transaction" value="called"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="POST" protocol="http" uri-template="/{endUserId}/refund">
    <inSequence>
      <log>
        <property name="Refund" value="called"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
  <resource methods="GET" protocol="http" uri-template="/{endUserId}/balance">
    <inSequence>
      <log>
        <property name="balance operation" value="called"/>
      </log>
    </inSequence>
    <outSequence/>
    <faultSequence/>
  </resource>
</api>
